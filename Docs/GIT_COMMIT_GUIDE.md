# Git Commit 规范

本项目使用严格的 Git commit 信息规范，所有提交都必须遵循以下格式：

## 提交格式

```
<类型>: <描述>

[可选的正文]

[可选的脚注]
```

## 支持的类型

| 类型         | 说明                 | Emoji |
| ---------- | ------------------ | ----- |
| `feat`     | ✨ 添加新功能            | ✨     |
| `fix`      | 🐛 修复 Bug          | 🐛     |
| `docs`     | 📝 仅文档变更           | 📝     |
| `style`    | 💄 格式变动，不影响功能（如空格） | 💄     |
| `refactor` | ♻️ 重构，无新增功能或修复     | ♻️     |
| `test`     | ✅ 添加或修改测试代码        | ✅     |
| `chore`    | 🔧 构建过程或辅助工具变动     | 🔧     |
| `perf`     | ⚡️ 性能优化            | ⚡️     |
| `ci`       | 💚 CI/CD 脚本更新      | 💚     |
| `revert`   | ⏪ 回滚变更             | ⏪     |

## 示例

### 好的提交信息 ✅

```
feat: 添加用户情感分析功能

实现了基于机器学习的情感分析算法，可以识别用户日记中的情绪状态。

Closes #123
```

```
fix: 修复登录页面样式问题

- 修复按钮对齐问题
- 调整输入框边距
- 优化移动端显示效果
```

```
docs: 更新 API 文档

添加了情感分析 API 的详细说明和示例代码
```

### 不好的提交信息 ❌

```
更新代码
```

```
fix bug
```

```
添加新功能，修复一些问题，更新文档
```

## 安装和配置

### 1. 安装依赖

```bash
npm install
```

### 2. 安装 Git hooks

```bash
npm run prepare
```

### 3. 配置 Git 提交模板

```bash
git config commit.template .gitmessage
```

## 使用方法

### 方法一：使用交互式提交工具（推荐）

```bash
npm run commit
```

这将启动一个交互式界面，引导您创建符合规范的提交信息。

### 方法二：手动编写提交信息

```bash
git commit -m "feat: 添加用户登录功能"
```

## 验证机制

项目已配置 Git hooks，会在提交时自动验证提交信息格式：

- **commit-msg hook**: 验证提交信息是否符合规范
- **commitlint**: 检查提交类型、格式和长度

如果提交信息不符合规范，提交将被拒绝，您需要修改提交信息后重新提交。

## 规则说明

1. **类型必填**: 每个提交都必须包含有效的类型前缀
2. **描述必填**: 类型后必须有简短的描述
3. **描述长度**: 第一行（标题）不超过 50 个字符
4. **总长度**: 整个提交信息标题不超过 72 个字符
5. **格式**: 类型和描述之间用冒号和空格分隔

## 故障排除

### 提交被拒绝

如果您的提交被拒绝，请检查：

1. 是否使用了正确的类型前缀
2. 类型后是否有冒号和空格
3. 描述是否为空
4. 标题长度是否超过限制

### 重新提交

```bash
git commit --amend -m "正确的提交信息"
```

## 其他工具

- 查看提交历史：`git log --oneline`
- 生成变更日志：可以基于规范化的提交信息自动生成
- 语义化版本：可以根据提交类型自动确定版本号

遵循这些规范将帮助团队维护清晰的项目历史，便于代码审查和版本管理。
